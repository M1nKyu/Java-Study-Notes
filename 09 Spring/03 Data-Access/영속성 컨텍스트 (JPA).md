---
created: 2025-02-08 17:18
category:
  - spring
  - database
  - jpa
tags:
  - TIL
last_modified: 2025-02-08T19:43:00
---
- JPAì—ì„œ ê°€ìž¥ ì¤‘ìš”í•œ ë‘ê°€ì§€
	1. **ê°ì²´ì™€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì˜ ë§¤í•‘ (Object Relational Mapping)**
		- DBì™€ ê°ì²´ë¥¼ ì–´ë–»ê²Œ ì„¤ê³„í•˜ê³ , ì´ ë‘˜ ê°„ì˜ ë§¤í•‘ì„ ì–´ë–»ê²Œ í•  ê²ƒì¸ê°€ 
	2. **ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸(Persistence Context)**
		- ì‹¤ì œ JPAê°€ ë‚´ë¶€ì—ì„œ ì–´ë–»ê²Œ ë™ìž‘í•˜ëŠ”ê°€
---
## â­ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëž€?
### ðŸª ê°œë…
- **ì—”í‹°í‹°ë¥¼ ì˜êµ¬ ì €ìž¥í•˜ëŠ” í™˜ê²½**ì´ë¼ëŠ” ëœ»ì´ë‹¤.
- JPA(Java Persistence API)ì—ì„œ ì—”í‹°í‹°ë¥¼ ê´€ë¦¬í•˜ëŠ” **ë…¼ë¦¬ì  ê°œë…**ì´ë‹¤.
- JPAì—ì„œ ì—”í‹°í‹° ê°ì²´ë¥¼ ì €ìž¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” **1ì°¨ ìºì‹œ ì—­í• **ì„ í•œë‹¤.
- ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ì´ì—ì„œ **ê°ì²´ë¥¼ ê´€ë¦¬**í•˜ëŠ” **ì¼ì¢…ì˜ ìºì‹œ**ë¼ê³  ë³¼ ìˆ˜ ìžˆë‹¤.
- ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëŠ” **ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ ìƒì„±í•  ë•Œ í•˜ë‚˜** ë§Œë“¤ì–´ì§„ë‹¤.
	- ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ í†µí•´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì ‘ê·¼í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìžˆë‹¤.
- `em.persist(entity);`
	- ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ ì‚¬ìš©í•˜ì—¬ `entity`ë¥¼ **ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ìž¥**í•˜ëŠ” ì˜ë¯¸ì´ë‹¤. (DBì— ì €ìž¥í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ)
---
### ðŸª EntityManagerFactoryì™€ EntityManager
- ê³ ê°ì˜ **ìš”ì²­**ì´ ë“¤ì–´ì˜¤ê²Œ ë˜ë©´ **EntityManagerFactory**ë¥¼ ì´ìš©í•˜ì—¬ **ê°ê° EntityManagerë¥¼ ìƒì„±**í•˜ê²Œ ëœë‹¤.
- EntityManagerì€ ë‚´ë¶€ì ìœ¼ë¡œ **ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜**ì„ ì´ìš©í•˜ì—¬ DBì™€ ì†Œí†µí•œë‹¤.
#### ðŸ¬ EntityManagerFactory
- EntityManagerë¥¼ ìƒì„±í•˜ëŠ” íŒ©í† ë¦¬ ê°ì²´.
- JPAë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ê°€ìž¥ ë¨¼ì € **EntityMangerFactory ì¸í„°íŽ˜ì´ìŠ¤ ê°ì²´ë¥¼ ë¨¼ì € ìƒì„±**í•´ì•¼ í•œë‹¤.
- ìƒì„± ë¹„ìš©ì´ ë§¤ìš° í¬ë¯€ë¡œ **ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì—ì„œ í•œ ë²ˆë§Œ ìƒì„±**í•˜ê³ , ê³µìœ í•´ì„œ ì‚¬ìš©í•œë‹¤.
- ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì ‘ê·¼í•´ë„ ì•ˆì „í•˜ë¯€ë¡œ ì„œë¡œ ë‹¤ë¥¸ ìŠ¤ë ˆë“œ ê°„ ê³µìœ í•´ë„ ëœë‹¤.
```java
// ìƒì„±
EntityManagerFactory emf = Persistence.createEntityManagerFactory("persistence-unit-name");
```

#### ðŸ¬ EntityManager
- ì‹¤ì œ **ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ê´€ë¦¬í•˜ëŠ” ê°ì²´**ì´ë‹¤.
	- ì—”í‹°í‹°ë¥¼ ê´€ë¦¬í•˜ëŠ” ê´€ë¦¬ìžë¡œ, **ì—”í‹°í‹°ì™€ ê´€ë ¨ëœ ëª¨ë“  ì¼ì„ ì²˜ë¦¬**í•œë‹¤.
- EntityManagerFactoryì—ì„œ ìƒì„±ëœë‹¤.
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì´ í•„ìš”í•œ ì‹œì ê¹Œì§€ ì»¤ë„¥ì…˜ì„ ì–»ì§€ ì•ŠëŠ”ë‹¤.
- **ìŠ¤ë ˆë“œ ê°„ ê³µìœ ê°€ ë¶ˆê°€ëŠ¥(Thread-unsafe)**, ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ ìƒì„±í•´ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
- ì—”í‹°í‹°ë¥¼ ì €ìž¥(`persist`), ì¡°íšŒ(`find`), ìˆ˜ì •(`merge`), ì‚­ì œ(`remove`)í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
```java
// ìƒì„±: ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ë¥¼ ìƒì„±í–ˆìœ¼ë©´ ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ ìƒì„±í•  ìˆ˜ ìžˆë‹¤.
EntityManagerFactory emf = Persistence.createManagerFactory("example");
EntityManager em = emf.createEntityManager();
```

- EntityManagerì™€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ì˜ˆì œ
```java
EntityManager em = emf.createEntityManager(); // ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ìƒì„±
EntityTransaction tx = em.getTransaction();
tx.begin(); // íŠ¸ëžœìž­ì…˜ ì‹œìž‘

Member member = new Member();
member.setId("memeber");
member.setName("John");

// ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ìž¥ë¨ (ë¹„ì˜ì† -> ì˜ì†)
em.persist(member);  

tx.commit(); // íŠ¸ëžœìž­ì…˜ ì»¤ë°‹ (flush ì‹¤í–‰ â†’ DB ë°˜ì˜)
em.close();  // EntityManager ì¢…ë£Œ (ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ì œê±°)
```
---
### ðŸª ì—”í‹°í‹°ì˜ 4ê°€ì§€ ìƒíƒœ (ìƒëª… ì£¼ê¸°)
- ![ì—”í‹°í‹° ìƒëª…ì£¼ê¸°](https://psvm.kr/posts/tutorials/jpa/3-em-and-persistence-context/entity-lifecycle.svg)
	- [ì´ë¯¸ì§€ ì¶œì²˜](https://psvm.kr/posts/tutorials/jpa/4-entity-lifecycle)
#### ðŸ¬ ë¹„ì˜ì† (new/transient)
- ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ ì „í˜€ ê´€ê³„ê°€ ì—†ëŠ” ìƒˆë¡œìš´ ìƒíƒœ.
- `new` í‚¤ì›Œë“œë¡œ ê°ì²´ë¥¼ ìƒì„±í–ˆì§€ë§Œ `EntityManager`ì— ì €ìž¥ë˜ì§€ ì•Šì€ ìƒíƒœ.
#### ðŸ¬ ì˜ì† (merged)
- `EntityManager.persist(entity)`ë¥¼ í†µí•´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ê´€ë¦¬í•˜ëŠ” ìƒíƒœ.
#### ðŸ¬ ì¤€ì˜ì† (detached)
- `EntityManager.clear()`, `EntityManager.detach(entity)`, `EntityManager.close()` ë“±ì„ í˜¸ì¶œí•˜ì—¬ **ê´€ë¦¬ê°€ í•´ì œ**ëœ ìƒíƒœ.
#### ðŸ¬ ì‚­ì œ (removed)
- `EntityManager.remove(entity)`ë¥¼ í˜¸ì¶œí•˜ì—¬ ì‚­ì œëœ ìƒíƒœ.
---
### ðŸª ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš© ì´ì 
> ì™œ DBì™€ ë°”ë¡œ ì†Œí†µí•˜ì§€ ì•Šê³ , ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ê°œë…ì„ ì‚¬ìš©?
#### ðŸ¬ 1. 1ì°¨ ìºì‹œ
- **ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ë‚´ë¶€ì—ëŠ” ìºì‹œ**ê°€ ìžˆëŠ”ë° ì´ë¥¼ **1ì°¨ ìºì‹œ**ë¼ê³  í•œë‹¤.
- ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•˜ë©´ **1ì°¨ ìºì‹œì— ë¨¼ì € ì €ìž¥**ë˜ë©°, ì´í›„ ê°™ì€ ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•  ë•Œ ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒì—†ì´ 1ì°¨ ìºì‹œì—ì„œ ê°€ì ¸ì˜¨ë‹¤.
```java
// ì—”í‹°í‹°ë¥¼ ìƒì„±í•œ ìƒíƒœ (ë¹„ì˜ì†) 
Member member = new Member(); 
member.setId("member1"); 
member.setName("íšŒì›1");  

// ì—”í‹°í‹°ë¥¼ ì˜ì† -> 1ì°¨ ìºì‹œì— ì €ìž¥ë¨.
// ì—¬ê¸°ì„œ íŠ¸ëžœìž­ì…˜ì´ commit ë˜ì§€ ì•Šì•˜ìŒìœ¼ë¡œ ì‹¤ì œ DBì— ë“¤ì–´ê°€ì§€ ì•ŠìŒ. 
entityManager.persist(member);  

// 1ì°¨ ìºì‹œì—ì„œ ì¡°íšŒ 
Member member = entityManager.find(Member.class, "member1");
```

- 1ì°¨ ìºì‹œì— ì—†ë‹¤ë©´?
	- **DBì—ì„œ ì¡°íšŒ** -> DBì—ì„œ ì¡°íšŒëœ ê²°ê³¼ê°€ **1ì°¨ ìºì‹œì— ì €ìž¥**ë¨ -> ì €ìž¥ëœ **1ì°¨ ìºì‹œì˜ ì—”í‹°í‹° ì •ë³´ë¥¼ ë°˜í™˜**í•œë‹¤.
	- ![1ì°¨ ìºì‹œì— ì—†ëŠ” ê²½ìš°](https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S3FYyci6xXMyLiziD5kdrw.png)
		- [ì´ë¯¸ì§€ ì¶œì²˜ (ê¹€ì˜í•œ JPA ê°•ì˜ìžë£Œ)](https://medium.com/ssonzk/jpa-%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EC%97%90-%EB%8C%80%ED%95%B4-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90-c6a6ff476464)


#### ðŸ¬ 2. ë™ì¼ì„± ë³´ìž¥ (Identity)
- ê°™ì€ íŠ¸ëžœìž­ì…˜ ì•ˆì—ì„œëŠ” **ê°™ì€ idë¥¼ ê°€ì§„ ì—”í‹°í‹°** ê°ì²´ê°€ **í•­ìƒ ë™ì¼í•œ ê°ì²´ë¥¼ ë³´ìž¥**í•œë‹¤.
- ì¦‰, `find()`ë¡œ ì¡°íšŒí•œ ì—”í‹°í‹°ì™€ `persist()`ëœ ì—”í‹°í‹°ëŠ” ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ì´ë‹¤.
```java
Member member1 = em.find(Member.class, "member1");
Member member2 = em.find(Member.class, "member1");

System.out.println(member1 == member2); // true (ê°™ì€ ì¸ìŠ¤í„´ìŠ¤)
```

- ë™ì¼ì„±ì„ ì œê³µí• ìˆ˜ ìžˆëŠ” ê²ƒì€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ **1ì°¨ ìºì‹œê°€ ìžˆê¸° ë•Œë¬¸ì—** ê°€ëŠ¥í•˜ë‹¤.
	- 1ì°¨ ìºì‹œëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ìžˆê³ , ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëŠ” íŠ¸ëžœìž­ì…˜ì˜ ì‹œìž‘ê³¼ í•¨ê»˜ ìƒì„±ë˜ê³  ì£µë£Œì‹œ ì†Œë©¸ë˜ê¸° ë•Œë¬¸ì´ë‹¤.
		- (ë¬¼ë¡ , ê°™ì€ íŠ¸ëžœìž­ì…˜ ì•ˆì—ì„œ í—ˆìš©ë˜ëŠ” ì´ì•¼ê¸°.)
#### ðŸ¬ 3. ë³€ê²½ ê°ì§€ (Dirty Checking)
> ë³€ê²½ ê°ì§€ëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ê´€ë¦¬í•˜ëŠ” ì˜ì† ìƒíƒœì˜ ì—”í‹°í‹°ë§Œ ì ìš©ëœë‹¤.
- JPAë¡œ **ì—”í‹°í‹°ë¥¼ ìˆ˜ì •**í•  ë•ŒëŠ” **ë‹¨ìˆœížˆ ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•´ì„œ ë°ì´í„°ë¥¼ ë³€ê²½**í•˜ë©´ ëœë‹¤.
- JPAëŠ” íŠ¸ëžœìž­ì…˜ì´ ì»¤ë°‹ë  ë•Œ ë³€ê²½ëœ ì‚¬í•­ì„ **ìžë™ìœ¼ë¡œ ê°ì§€í•˜ì—¬ ë°˜ì˜**í•œë‹¤.
```java
em.getTransaction().begin();

Member member = em.find(Member.class, "member1");
member.setName("UpdatedName"); // ì—”í‹°í‹° ê°’ ë³€ê²½

em.getTransaction().commit(); // UPDATE ì¿¼ë¦¬ ìžë™ ì‹¤í–‰
```
- ë³€ê²½ íë¦„
	1. íŠ¸ëžœìž­ì…˜ì´ ì»¤ë°‹ë˜ë©´, ì—”í‹°í‹° ë§¤ë‹ˆì €ê°€ ë¨¼ì € **í”ŒëŸ¬ì‹œ(flush)ë¥¼ í˜¸ì¶œ**í•œë‹¤. (`flush`: ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ìž¥ëœ ì—”í‹°í‹° ìƒíƒœë¥¼ DBì™€ ë™ê¸°í™”í•˜ëŠ” ìž‘ì—…)
	2. **ì—”í‹°í‹°ì™€ ìŠ¤ëƒ…ìƒ·**(ì—”í‹°í‹°ê°€ ìµœì´ˆ ë¡œë”©ëœ ì‹œì ì˜ ìƒíƒœ)ì„ **ë¹„êµ**í•˜ì—¬ ë³€ê²½ëœ ì—”í‹°í‹°ë¥¼ ì°¾ëŠ”ë‹¤.
	3. ë³€ê²½ëœ ì—”í‹°í‹°ê°€ ìžˆìœ¼ë©´, **ìˆ˜ì • ì¿¼ë¦¬ë¥¼ ìƒì„±**í•´ì„œ **ì“°ê¸° ì§€ì—° SQL ì €ìž¥ì†Œ**ì— **ì €ìž¥**í•œë‹¤. (ì‹¤ì œ DBì— ë°˜ì˜í•  ì¿¼ë¦¬ë¥¼ ì¼ì‹œì ìœ¼ë¡œ ë³´ê´€)
	4. ì“°ê¸° ì§€ì—° ì €ìž¥ì†Œì˜ **SQLì„ í”ŒëŸ¬ì‹œ(flush)** í•˜ì—¬ **ë°ì´í„°ë² ì´ìŠ¤ì— ë°˜ì˜**í•œë‹¤.
	5. ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ëžœìž­ì…˜ì„ **ì»¤ë°‹**í•œë‹¤. 
- ![íë¦„](https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d96v7c_kXKjdwMQACgswcw.png)
	- [ì´ë¯¸ì§€ ì¶œì²˜ (ê¹€ì˜í•œ JPA ê°•ì˜ìžë£Œ)](https://medium.com/ssonzk/jpa-%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EC%97%90-%EB%8C%80%ED%95%B4-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90-c6a6ff476464)

> ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ í”ŒëŸ¬ì‹œí•˜ëŠ” ë°©ë²•
	1. EntityManagerì˜ `.flush()` ë©”ì„œë“œ ì§ì ‘ í˜¸ì¶œ 
	2. Transactionì˜ Commitì´ ë°œìƒ ì‹œ ìžë™ í˜¸ì¶œ
	3. JPQL ì¿¼ë¦¬ ì‹¤í–‰ì‹œ ìžë™ í˜¸ì¶œ

#### ðŸ¬ 4. ì§€ì—° ë¡œë”© (Lazy Loading)
- `ManyToOne(fetch = FetchType.LAZY)` ì„¤ì • ì‹œ, ì‹¤ì œ ì‚¬ìš©ë  ë•Œê¹Œì§€ ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒë¥¼ ì§€ì—°í•œë‹¤.
- `em.find()`ë¥¼ í˜¸ì¶œí•´ë„ ì¦‰ì‹œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ì§€ ì•Šê³ , **í•„ìš”í•  ë•Œ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰**í•œë‹¤.
```java
@ManyToOne(fetch = FetchType.LAZY)
private Team team;
```

#### ðŸ¬ 5. íŠ¸ëžœìž­ì…˜ì„ ì§€ì›í•˜ëŠ” ì“°ê¸° ì§€ì—° (Transactional write-behind)
- ì“°ê¸° ì§€ì—°ì€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì—”í‹°í‹° **ìƒíƒœ ë³€ê²½ì„ DBì— ì¦‰ì‹œ ë°˜ì˜**í•˜ì§€ ì•Šê³ , íŠ¸ëžœìž­ì…˜ **ì»¤ë°‹ ì‹œì ê¹Œì§€ ì§€ì—°** ì‹œí‚¨ë‹¤ëŠ” ê°œë…ì´ë‹¤.
- íŠ¸ëžœìž­ì…˜ ì»¤ë°‹ ì‹œì ê¹Œì§€ **ë³€ê²½ ì‚¬í•­ì„ ë©”ëª¨ë¦¬ ìƒì—ì„œ ê´€ë¦¬**í•˜ê³ , **í•œ ë²ˆì— DBì— ë°˜ì˜**í•¨ìœ¼ë¡œì¨ **ì„±ëŠ¥ì„ ìµœì í™”**í•˜ëŠ” ê¸°ë²•ì´ë‹¤.
- ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ì•ˆì—ëŠ” 1ì°¨ ìºì‹œ ë¿ë§Œ ì•„ë‹ˆë¼ `ì“°ê¸° ì§€ì—° SQL ì €ìž¥ì†Œ`ê°€ ì¡´ìž¬í•œë‹¤.
- `.persist(entity)`ê°€ ë°œìƒí•˜ë©´ 1ì°¨ìºì‹œì— ì €ìž¥í•˜ë©´ì„œ `ì“°ê¸° ì§€ì—° SQL ì €ìž¥ì†Œ`ì— ì¿¼ë¦¬ë¥¼ ìŒ“ì•„ë‘”ë‹¤.
```java
em.getTransaction().begin();

// ì—”í‹°í‹° ìƒíƒœ ë³€ê²½ (ì“°ê¸° ì§€ì—°)
// setName()ì„ í˜¸ì¶œí•´ë„ ì¦‰ì‹œ DBì— ë°˜ì˜ë˜ì§€ ì•ŠëŠ”ë‹¤.
Member member1 = em.find(Member.class, "member1");
member1.setName("UpdatedName1");

Member member2 = em.find(Member.class, "member2");
member2.setName("UpdatedName2");

// íŠ¸ëžœìž­ì…˜ ì»¤ë°‹ ì‹œì ì— DBì— ë°˜ì˜ (í•œ ë²ˆì˜ ì¿¼ë¦¬ë¡œ ë°˜ì˜)
em.getTransaction().commit();
```

---
## ðŸ§™â€â™‚ï¸ ìš”ì•½
- **ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëŠ”**
	- JPAì—ì„œ **ì—”í‹°í‹°ë¥¼ ê´€ë¦¬**í•˜ëŠ” 1ì°¨ ìºì‹œ ì—­í• ì„ í•˜ëŠ” **ë…¼ë¦¬ì  ê°œë…**ì´ë‹¤.
	- ì—”í‹°í‹° ìƒëª…ì£¼ê¸°ë¥¼ ê´€ë¦¬í•˜ë©°, DBì™€ì˜ ë™ê¸°í™”ë¥¼ ë‹´ë‹¹í•œë‹¤.
	- `EntityManager`ë¥¼ í†µí•´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì ‘ê·¼í•˜ê³ , ì—”í‹°í‹°ë¥¼ ê´€ë¦¬í•œë‹¤. 

- ì—”í‹°í‹° ìƒëª…ì£¼ê¸°
	- ë¹„ì˜ì†(Transient) / ì˜ì†(Persistent) / ì¤€ì˜ì†(Detached) / ì‚­ì œ(Removed)

- ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš© ì´ì ì€
	- **ì—”í‹°í‹° ì¡°íšŒ**ì‹œ **ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë¨¼ì €** ì €ìž¥ëœ ì—”í‹°í‹°ë¥¼ **í™•ì¸** í•˜ëŠ” **1ì°¨ ìºì‹œ** ì—­í• ì„ í•œë‹¤.
	- ê°™ì€ íŠ¸ëžœìž­ì…˜ ë‚´ **ê°™ì€ ID**ì˜ ì—”í‹°í‹°ëŠ” í•­ìƒ **ë™ì¼í•œ ê°ì²´**ë¥¼ ë³´ìž¥í•œë‹¤.
	- íŠ¸ëžœìž­ì…˜ ì»¤ë°‹ ì‹œ, **ë³€ê²½ëœ ì—”í‹°í‹°ë¥¼ ìžë™ ê°ì§€**í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— ë°˜ì˜í•œë‹¤.
	- ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ **ì‹¤ì œ ì‚¬ìš©ë  ë•Œê¹Œì§€** ë°ì´í„°ë² ì´ìŠ¤ **ì¡°íšŒë¥¼ ì§€ì—°**í•œë‹¤.
	- ì—”í‹°í‹° **ìƒíƒœ ë³€ê²½**ì€ íŠ¸ëžœìž­ì…˜ **ì»¤ë°‹ ì‹œì ê¹Œì§€ ì§€ì—°**ë˜ë©°, **í•œ ë²ˆì— DBì— ë°˜ì˜**ëœë‹¤.

- ì—”í‹°í‹° ì¡°íšŒ ~ ì»¤ë°‹
	1. ì—”í‹°í‹° ì¡°íšŒ ì‹œ, ë¨¼ì € **1ì°¨ ìºì‹œì—ì„œ í™•ì¸**í•˜ê³  **ì—†ìœ¼ë©´ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì¡°íšŒ í›„ ìºì‹œì— ì €ìž¥**í•œë‹¤.
	2. ì—”í‹°í‹° **ìƒíƒœê°€ ë³€ê²½ë˜ë©´** ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ì´ë¥¼ ê°ì§€í•˜ê³  **ì“°ê¸° ì§€ì—° SQL ì €ìž¥ì†Œì— ì¿¼ë¦¬ë¥¼ ìŒ“ëŠ”ë‹¤**.
	3. íŠ¸ëžœìž­ì…˜ **ì»¤ë°‹ ì‹œ**, `flush`ê°€ í˜¸ì¶œë˜ì–´ **ì“°ê¸° ì§€ì—° SQL ì €ìž¥ì†Œì˜ ì¿¼ë¦¬ê°€ ì‹¤í–‰**ë˜ê³ , ë³€ê²½ ì‚¬í•­ì´ DBì— ë°˜ì˜ëœë‹¤.

---
> **ì°¸ê³ ì‚¬ì´íŠ¸**
> - [01-ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸](https://medium.com/ssonzk/jpa-%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EC%97%90-%EB%8C%80%ED%95%B4-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90-c6a6ff476464)
> - [02-JPA 1ì°¨ìºì‹œ,2ì°¨ìºì‹œ](https://medium.com/ssonzk/jpa-1%EC%B0%A8-%EC%BA%90%EC%8B%9C%EC%99%80-2%EC%B0%A8-%EC%BA%90%EC%8B%9C-401ac9183a1d)
> - [03-EntityManager, EntityMangerFactory](https://bnzn2426.tistory.com/143)
> - [04-Entity Life Cycle](https://psvm.kr/posts/tutorials/jpa/4-entity-lifecycle)
